<!DOCTYPE html>
<html lang="fr">
    
    <style >
        body {
    font-family: Arial, sans-serif;
    background: #f4f4f4;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background-color :green ;
}

#container {
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
    text-align: center;
    width: 300px;
}

input {
    width: 90%;
    padding: 8px;
    margin: 5px 0;
    border: 1px solid #ddd;
    border-radius: 5px;
}

button {
    background: blue;
    color: white;
    border: none;
    padding: 10px;
    cursor: pointer;
    border-radius: 5px;
    margin: 5px;
}

button:hover {
    background: darkblue;
}

p {
    color: blue;
    cursor: pointer;
}

#tableauUtilisateurs {
    display: none;
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
}

th, td {
    border: 1px solid black;
    padding: 5px;
}

#connexion, #motOublie {
    display: none;
}

#deconnexion {
    display: none;
}

    </style>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inscription & Connexion</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="container">
        <div id="inscription">
            <h2>Inscription</h2>
            <input type="text" id="inscriptionNom" placeholder="Nom d'utilisateur">
            <input type="email" id="inscriptionEmail" placeholder="Email">
            <input type="password" id="inscriptionMdp" placeholder="Mot de passe">
            <button onclick="inscrire()">S'inscrire</button>
            <p onclick="afficherConnexion()">Déjà inscrit ? Se connecter</p>
        </div>

        <div id="connexion">
            <h2>Connexion</h2>
            <input type="text" id="connexionNom" placeholder="Nom d'utilisateur">
            <input type="password" id="connexionMdp" placeholder="Mot de passe">
            <button onclick="connecter()">Se connecter</button>
            <p onclick="afficherMotOublie()">Mot de passe oublié ?</p>
        </div>

        <div id="motOublie">
            <h2>Mot de passe oublié</h2>
            <input type="email" id="mdpOublieEmail" placeholder="Entrez votre email">
            <button onclick="afficherMdp()">Afficher le mot de passe</button>
            <p onclick="afficherConnexion()">Retour à la connexion</p>
            <p id="mdpAffiche"></p>
        </div>

        <button id="voirUtilisateurs" onclick="afficherUtilisateurs()">Voir la liste des utilisateurs</button>
        <table id="tableauUtilisateurs">
            <tr>
                <th>Nom</th>
                <th>Email</th>
                <th>Mot de passe</th>
            </tr>
        </table>

        <button id="deconnexion" onclick="deconnecter()">Se déconnecter</button>
    </div>

    <script src="script.js"></script>
</body>
<script >function inscrire() {
    let nom = document.getElementById("inscriptionNom").value;
    let email = document.getElementById("inscriptionEmail").value;
    let mdp = document.getElementById("inscriptionMdp").value;

    if (nom && email && mdp) {
        let utilisateurs = JSON.parse(localStorage.getItem("utilisateurs")) || [];

        // Vérifier si l'email est déjà utilisé
        let existe = utilisateurs.find(user => user.email === email);
        if (existe) {
            alert("Email déjà utilisé !");
            return;
        }

        utilisateurs.push({ nom, email, mdp });
        localStorage.setItem("utilisateurs", JSON.stringify(utilisateurs));

        alert("Inscription réussie !");
        afficherConnexion();
    } else {
        alert("Veuillez remplir tous les champs !");
    }
}

function connecter() {
    let nom = document.getElementById("connexionNom").value;
    let mdp = document.getElementById("connexionMdp").value;

    let utilisateurs = JSON.parse(localStorage.getItem("utilisateurs")) || [];
    let utilisateur = utilisateurs.find(user => user.nom === nom && user.mdp === mdp);

    if (utilisateur) {
        localStorage.setItem("connecte", nom);
        alert("Connexion réussie !");
        window.location.href = "https://site-web-asa-en-ligne-m-da-1-zhdm.vercel.app/";
    } else {
        alert("Nom d'utilisateur ou mot de passe incorrect !");
    }
}

function afficherMotOublie() {
    document.getElementById("connexion").style.display = "none";
    document.getElementById("motOublie").style.display = "block";
}

function afficherMdp() {
    let email = document.getElementById("mdpOublieEmail").value;
    let utilisateurs = JSON.parse(localStorage.getItem("utilisateurs")) || [];
    let utilisateur = utilisateurs.find(user => user.email === email);

    if (utilisateur) {
        document.getElementById("mdpAffiche").innerText = "Votre mot de passe est : " + utilisateur.mdp;
    } else {
        document.getElementById("mdpAffiche").innerText = "Email introuvable.";
    }
}

function afficherConnexion() {
    document.getElementById("inscription").style.display = "none";
    document.getElementById("connexion").style.display = "block";
}

function afficherUtilisateurs() {
    let tableau = document.getElementById("tableauUtilisateurs");
    tableau.style.display = "table";

    let utilisateurs = JSON.parse(localStorage.getItem("utilisateurs")) || [];
    tableau.innerHTML = "<tr><th>Nom</th><th>Email</th><th>Mot de passe</th></tr>";

    utilisateurs.forEach(user => {
        let row = tableau.insertRow();
        row.insertCell(0).innerText = user.nom;
        row.insertCell(1).innerText = user.email;
        row.insertCell(2).innerText = user.mdp;
    });
}

function deconnecter() {
    localStorage.removeItem("connecte");
    alert("Déconnecté !");
    location.reload();
}





function afficherUtilisateurs() {
    let code = prompt("Entrez le code d'accès :");
    
    if (code !== "080600") {
        alert("Code incorrect !");
        return;
    }

    let tableau = document.getElementById("tableauUtilisateurs");
    tableau.style.display = "table";

    let utilisateurs = JSON.parse(localStorage.getItem("utilisateurs")) || [];
    tableau.innerHTML = "<tr><th>Nom</th><th>Email</th></tr>"; // Tsy asiana mot de passe

    utilisateurs.forEach(user => {
        let row = tableau.insertRow();
        row.insertCell(0).innerText = user.nom;
        row.insertCell(1).innerText = user.email;
    });
}

 </script>
</html>
